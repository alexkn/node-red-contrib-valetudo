<script type="text/javascript">
    RED.nodes.registerType('valetudo-map-png',{
        category: 'function',
        color: '#a6bbcf',
        defaults: {
            name: {value:""},
            drawPath: {value:true},
            drawCharger: {value:true},
            drawRobot: {value:true},
            scale: {value:4},
            defer: {value:2000},
            cropX1: {value:null},
            cropX2: {value:null},
            cropY1: {value:null},
            cropY2: {value:null}
        },
        inputs:1,
        outputs:1,
        icon: "white-globe.png",
        label: function() {
            return this.name||"valetudo-map-png";
        }
    });
</script>

<script type="text/x-red" data-template-name="valetudo-map-png">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-drawPath"><i class="fa fa-level-up"></i> Draw&nbsp;Path</label>
        <input type="checkbox" id="node-input-drawPath" placeholder="Draw Path">
    </div>
    <div class="form-row">
        <label for="node-input-drawCharger"><i class="fa fa-plug"></i> Draw&nbsp;Charger</label>
        <input type="checkbox" id="node-input-drawCharger" placeholder="Draw Charger">
    </div>
    <div class="form-row">
        <label for="node-input-drawRobot"><i class="fa fa-circle-o"></i> Draw&nbsp;Robot</label>
        <input type="checkbox" id="node-input-drawRobot" placeholder="Draw Robot">
    </div>
    <div class="form-row">
        <label for="node-input-scale"><i class="fa fa-expand"></i> Scale</label>
        <input type="number" id="node-input-scale" placeholder="Scale">
    </div>
    <div class="form-row">
        <label for="node-input-defer"><i class="fa fa-clock-o"></i> Defer</label>
        <input type="number" id="node-input-defer" placeholder="defer">
    </div>
    <div class="form-row">
        <label for="node-input-cropX1"><i class="fa fa-crop"></i> Crop x1</label>
        <input type="number" id="node-input-cropX1" placeholder="Crop x1">
    </div>
    <div class="form-row">
        <label for="node-input-cropX2"><i class="fa fa-crop"></i> Crop x2</label>
        <input type="number" id="node-input-cropX2" placeholder="Crop x2">
    </div>
    <div class="form-row">
        <label for="node-input-cropY1"><i class="fa fa-crop"></i> Crop y1</label>
        <input type="number" id="node-input-cropY1" placeholder="Crop y1">
    </div>
    <div class="form-row">
        <label for="node-input-cropY2"><i class="fa fa-crop"></i> Crop y2</label>
        <input type="number" id="node-input-cropY2" placeholder="Crop y2">
    </div>
</script>

<script type="text/x-red" data-help-name="valetudo-map-png">
    <p>Convert valetudo map_data (sent via mqtt) to a png image.</p>

    <p><b>Draw ...</b> selects the elements to be drawn.</p>

    <p><b>Scale</b> changes the size of the robot and charger.</p>

    <p>Setting <b>Defer</b> to a value > <code>0</code> throttles the map drawing to one per configured interval in milliseconds.</p>

    <p>With <b>Crop ...</b> values the map can be cropped to certain bounds.<br/>
       The values ​​refer to the pixel values ​​in the mapdata and not to zone coordinates.<br/>
       If the settings ​​are not specified, the whole map will be rendered as before.</p>
</script>
